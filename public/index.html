<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Idea Refiner</title>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VJ225P5PY2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-VJ225P5PY2');
    </script>

    <meta name="google-adsense-account" content="ca-pub-6985276543491890">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6985276543491890"
        crossorigin="anonymous"></script>

    <meta name="description" id="meta-desc" content="Analyze your startup ideas instantly with AI.">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/8637/8637103.png" type="image/png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script>
        tailwind.config = { darkMode: 'class', theme: { extend: { colors: { primary: '#2563eb', darkBg: '#0f172a', cardDark: '#1e293b' } } } }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            transition: all 0.3s;
        }

        .prose h1 {
            color: #60a5fa;
            font-size: 1.4em;
            font-weight: 800;
            margin-top: 1em;
            border-bottom: 1px solid #374151;
            padding-bottom: 5px;
        }

        .prose h2 {
            color: #93c5fd;
            font-size: 1.2em;
            font-weight: 700;
            margin-top: 1em;
        }

        .prose ul {
            list-style-type: disc;
            padding-left: 1.2rem;
            color: #d1d5db;
        }

        .prose p {
            margin-bottom: 0.8rem;
            color: #e5e7eb;
        }

        .spinner {
            border-top-color: transparent;
            animation: spinner 1s linear infinite;
        }

        @keyframes spinner {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        #pdf-generator-container {
            position: fixed;
            top: -10000px;
            left: -10000px;
            width: 800px;
            background: white;
            color: black;
            padding: 40px;
            font-family: Arial, sans-serif;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100 min-h-screen flex flex-col">

    <div id="pdf-generator-container"></div>

    <div id="loading-screen" class="hidden fixed inset-0 bg-black/80 z-[9999] flex items-center justify-center">
        <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl max-w-md w-full mx-4 shadow-2xl">
            <div class="text-center mb-4">
                <div class="text-5xl mb-3" id="loading-emoji">ğŸ”</div>
                <h3 class="font-bold text-xl mb-2" id="loading-title">Analiz Ediliyor...</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400" id="loading-message">Pazar verileri toplanÄ±yor</p>
            </div>

            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 mb-4 overflow-hidden">
                <div id="progress-bar"
                    class="bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500"
                    style="width: 0%"></div>
            </div>

            <p class="text-xs text-gray-400 text-center">â±ï¸ Ortalama sÃ¼re: 15-20 saniye</p>
        </div>
    </div>

    <div id="cookie-banner"
        class="fixed bottom-0 left-0 w-full bg-gray-900 border-t border-gray-700 p-4 shadow-2xl z-[9999] hidden transform transition-transform duration-500 translate-y-full">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="text-sm text-gray-300 text-center md:text-left">
                <i class="fas fa-cookie-bite text-yellow-500 mr-2"></i>
                <span id="cookie-text">We use cookies to provide a better experience.</span>
            </div>
            <div class="flex gap-3">
                <button onclick="rejectCookies()" id="cookie-reject-btn"
                    class="text-gray-400 hover:text-white px-4 py-2 rounded-lg text-sm font-medium transition border border-gray-600 hover:border-gray-400">Reject</button>
                <button onclick="acceptCookies()" id="cookie-accept-btn"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg text-sm font-bold transition shadow-lg">Accept</button>
            </div>
        </div>
    </div>

    <div id="feedback-modal"
        class="fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md border border-gray-200 dark:border-gray-700 relative overflow-hidden transform transition-all scale-95 opacity-0"
            id="feedback-content">
            <div class="bg-blue-600 p-4 text-white flex justify-between items-center">
                <h3 class="font-bold text-lg"><i class="far fa-paper-plane mr-2"></i> <span id="fb-title">Feedback &
                        Contact</span></h3>
                <button onclick="toggleFeedback()" class="hover:bg-blue-700 p-1 rounded"><i
                        class="fas fa-times"></i></button>
            </div>

            <form action="https://formspree.io/f/mqarbyej" method="POST" class="p-6 space-y-4">
                <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1" id="fb-email-label">Email
                        (Optional)</label>
                    <input type="email" name="email"
                        class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"
                        placeholder="example@email.com">
                </div>
                <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1" id="fb-msg-label">Message</label>
                    <textarea name="message" id="fb-msg-input" rows="4"
                        class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none"
                        placeholder="What's on your mind?" required></textarea>
                </div>
                <button type="submit" id="fb-submit-btn"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-lg transition active:scale-95">Send
                    ğŸš€</button>
            </form>
        </div>
    </div>

    <nav
        class="w-full bg-white/95 dark:bg-gray-900/95 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200 dark:border-gray-800">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <img src="images/logo.png" onerror="this.src='https://cdn-icons-png.flaticon.com/512/8637/8637103.png'"
                    class="h-8 w-8 rounded-full shadow-lg bg-white p-0.5">
                <span
                    class="text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 truncate max-w-[150px] md:max-w-none">
                    AI Idea Refiner
                </span>
            </div>
            <div class="flex items-center gap-3">
                <a href="blog.html"
                    class="hidden md:block text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-blue-500 transition mr-2">Blog</a>

                <button onclick="toggleFeedback()"
                    class="hidden md:flex items-center text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-blue-500 transition"><i
                        class="far fa-comment-alt mr-1"></i> <span id="nav-fb-text">Feedback</span></button>
                <button onclick="toggleFeedback()" class="md:hidden text-gray-600 dark:text-gray-300"><i
                        class="far fa-comment-alt"></i></button>
                <div class="h-4 w-[1px] bg-gray-300 dark:bg-gray-700"></div>

                <select id="lang-select"
                    class="bg-gray-100 dark:bg-gray-800 border-none rounded-lg px-2 py-1 text-xs font-medium focus:ring-0">
                    <option value="en" selected>EN</option>
                    <option value="tr">TR</option>
                </select>

                <button id="theme-toggle"
                    class="w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 flex items-center justify-center"><i
                        class="fas fa-moon text-sm" id="theme-icon"></i></button>
            </div>
        </div>
    </nav>

    <div class="flex flex-col md:flex-row max-w-7xl mx-auto w-full p-4 gap-6 flex-grow">
        <aside class="w-full md:w-1/4 hidden md:block">
            <div
                class="bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4 sticky top-20 max-h-[80vh] overflow-y-auto">
                <div class="flex items-center justify-between mb-4 border-b border-gray-200 dark:border-gray-700 pb-2">
                    <h3 id="history-title" class="font-bold text-xs text-gray-500">HISTORY</h3>
                    <button onclick="clearAllHistory()" id="history-clear-btn"
                        class="text-xs text-red-400 hover:text-red-600">Clear</button>
                </div>
                <div id="history-list" class="space-y-2"></div>
            </div>
        </aside>

        <main class="w-full md:w-3/4 flex flex-col gap-6">
            <div class="text-center space-y-4 mt-2">
                <h1 id="hero-title" class="text-4xl md:text-6xl font-extrabold tracking-tight leading-tight">
                    ğŸš€ GiriÅŸimcilik Fikrinizi <br class="md:hidden" />
                    <span class="text-blue-500">60 Saniyede</span> DetaylÄ± Analiz Edin
                </h1>
                <div
                    class="flex flex-wrap gap-3 md:gap-6 justify-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                    <span class="flex items-center gap-2 bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full">
                        <span class="text-green-600 dark:text-green-400">âœ…</span> Pazar Analizi
                    </span>
                    <span class="flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-3 py-1.5 rounded-full">
                        <span class="text-blue-600 dark:text-blue-400">âœ…</span> Rakip KarÅŸÄ±laÅŸtÄ±rmasÄ±
                    </span>
                    <span class="flex items-center gap-2 bg-purple-50 dark:bg-purple-900/20 px-3 py-1.5 rounded-full">
                        <span class="text-purple-600 dark:text-purple-400">âœ…</span> Maliyet Tahmini
                    </span>
                </div>
                <div class="mt-6 flex gap-3 justify-center flex-wrap">
                    <button onclick="scrollToInput()"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition active:scale-95">
                        ÃœCRETSÄ°Z ANALÄ°Z ET
                    </button>
                    <button onclick="showExampleReport()"
                        class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition active:scale-95">
                        Ã–RNEK RAPOR GÃ–R
                    </button>
                </div>
            </div>

            <div class="stats-banner bg-gradient-to-r from-blue-900 to-purple-900 py-6 px-4 rounded-2xl my-8 shadow-lg">
                <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 text-center text-white">
                    <div>
                        <div class="text-3xl md:text-4xl font-bold" id="total-analyses">1,247</div>
                        <div class="text-xs md:text-sm text-gray-300 mt-1">Toplam Analiz</div>
                    </div>
                    <div>
                        <div class="text-3xl md:text-4xl font-bold">â­ 4.8/5.0</div>
                        <div class="text-xs md:text-sm text-gray-300 mt-1">KullanÄ±cÄ± Memnuniyeti</div>
                    </div>
                    <div>
                        <div class="text-3xl md:text-4xl font-bold">ğŸŒ 52</div>
                        <div class="text-xs md:text-sm text-gray-300 mt-1">FarklÄ± Ãœlkeden GiriÅŸimci</div>
                    </div>
                </div>
            </div>

            <div
                class="ad-space w-full h-24 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center border border-gray-200 dark:border-gray-700 text-gray-400 text-xs overflow-hidden">
                <script async
                    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6985276543491890"
                    crossorigin="anonymous"></script>
                <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6985276543491890"
                    data-ad-slot="auto" data-ad-format="auto" data-full-width-responsive="true"></ins>
                <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
            </div>

            <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700">
                <textarea id="idea-input"
                    class="w-full h-40 p-4 bg-transparent text-base focus:outline-none resize-none rounded-lg"
                    placeholder="Type your idea here..."></textarea>
                <div class="flex justify-between items-center px-2 pb-2">
                    <span class="text-[10px] text-gray-400"><i class="fas fa-bolt"></i> Powered by Groq</span>
                    <button id="analyze-btn"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 px-6 rounded-lg shadow-lg flex items-center gap-2 transition active:scale-95">
                        <span id="btn-text">Analyze</span>
                        <div id="loading-spinner"
                            class="w-4 h-4 border-2 border-white border-t-transparent rounded-full spinner hidden">
                        </div>
                    </button>
                </div>
            </div>

            <div id="result-area" class="hidden opacity-0 transition-all duration-500">
                <div class="bg-gray-900 text-white rounded-xl shadow-lg overflow-hidden border border-gray-700">
                    <div class="p-6 md:p-10 bg-gray-900">
                        <div class="flex items-center gap-3 border-b border-gray-700 pb-4 mb-4">
                            <img src="images/logo.png"
                                onerror="this.src='https://cdn-icons-png.flaticon.com/512/8637/8637103.png'"
                                class="h-8 w-8 bg-white rounded-full p-0.5">
                            <h2 id="report-title" class="text-xl font-bold">Analysis Report</h2>
                        </div>
                        <div id="result-text" class="prose max-w-none text-sm md:text-base"></div>

                        <!-- Email Capture Form (Phase 2) -->
                        <div id="email-capture-section"
                            class="bg-yellow-50 dark:bg-yellow-900/20 border-2 border-yellow-400 rounded-xl p-4 md:p-6 mt-6 hidden">
                            <div class="flex flex-col md:flex-row items-start md:items-center gap-4">
                                <div class="text-4xl">ğŸ“§</div>
                                <div class="flex-grow w-full">
                                    <h3 class="font-bold text-lg mb-2 text-gray-800 dark:text-yellow-100"
                                        id="email-capture-title">Raporunu e-postana gÃ¶nderelim mi?</h3>
                                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-4" id="email-capture-desc">
                                        ğŸ“„ PDF rapor + ğŸ”” Yeni Ã¶zellikler hakkÄ±nda bildirim al
                                    </p>
                                    <form id="email-capture-form" class="flex flex-col sm:flex-row gap-2">
                                        <input type="email" id="user-email" placeholder="email@example.com"
                                            class="flex-grow px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm"
                                            required />
                                        <button type="submit"
                                            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-lg font-bold transition shadow-lg whitespace-nowrap text-sm"
                                            id="email-submit-btn">
                                            GÃ–NDER ğŸš€
                                        </button>
                                    </form>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-2" id="email-privacy-text">
                                        ğŸ”’ E-postanÄ±z gÃ¼vende. Spam gÃ¶ndermiyoruz.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-800 p-4 border-t border-gray-700">
                        <div class="flex flex-wrap gap-2 justify-between items-center mb-3">
                            <a href="https://www.buymeacoffee.com" target="_blank"
                                class="text-yellow-400 hover:text-yellow-300 text-xs font-bold flex items-center">
                                <i class="fas fa-coffee mr-1"></i> <span id="support-text">Support Us</span>
                            </a>
                            <button id="download-pdf-btn"
                                class="bg-red-600 active:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg shadow flex items-center gap-2 text-sm">
                                <i class="fas fa-file-pdf"></i> <span id="pdf-btn-text">Download PDF</span>
                            </button>
                        </div>
                        <div class="border-t border-gray-700 pt-3">
                            <p class="text-xs text-gray-400 mb-2" id="share-title">PaylaÅŸ:</p>
                            <div class="flex flex-wrap gap-2">
                                <button onclick="shareToTwitter()"
                                    class="bg-blue-400 hover:bg-blue-500 text-white px-3 py-2 rounded-lg flex items-center gap-2 text-xs font-semibold transition">
                                    <i class="fab fa-twitter"></i> Twitter
                                </button>
                                <button onclick="shareToLinkedIn()"
                                    class="bg-blue-700 hover:bg-blue-800 text-white px-3 py-2 rounded-lg flex items-center gap-2 text-xs font-semibold transition">
                                    <i class="fab fa-linkedin"></i> LinkedIn
                                </button>
                                <button onclick="copyLink()"
                                    class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded-lg flex items-center gap-2 text-xs font-semibold transition">
                                    <i class="fas fa-link"></i> <span id="copy-link-text">Link Kopyala</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer class="w-full bg-gray-900 border-t border-gray-800 mt-12 py-8">
        <div
            class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center text-sm text-gray-500">
            <div class="mb-4 md:mb-0">
                &copy; 2024 AI Idea Refiner. <span id="footer-rights">All rights reserved.</span>
            </div>
            <div class="flex gap-6">
                <a href="about.html" class="hover:text-blue-400 transition" id="footer-about">About Us</a>
                <a href="privacy.html" class="hover:text-blue-400 transition" id="footer-privacy">Privacy Policy</a>
                <a href="terms.html" class="hover:text-blue-400 transition" id="footer-terms">Terms of Use</a>
            </div>
            <a href="https://turbo0.com/item/ai-idea-refiner" target="_blank" rel="noopener noreferrer">
                <img src="https://img.turbo0.com/badge-listed-dark.svg" alt="Listed on Turbo0"
                    style="height: 54px; width: auto;" />
            </a>
            <a href="https://findly.tools/ai-idea-refiner?utm_source=ai-idea-refiner" target="_blank">
                <img src="https://findly.tools/badges/findly-tools-badge-dark.svg" alt="Featured on findly.tools"
                    width="150" />
            </a>
        </div>
    </footer>

    <script>
        const els = {
            langSelect: document.getElementById('lang-select'), heroTitle: document.getElementById('hero-title'), heroDesc: document.getElementById('hero-desc'), input: document.getElementById('idea-input'), btn: document.getElementById('analyze-btn'), btnText: document.getElementById('btn-text'), reportTitle: document.getElementById('report-title'), historyTitle: document.getElementById('history-title'), pdfBtnText: document.getElementById('pdf-btn-text'), spinner: document.getElementById('loading-spinner'), resultArea: document.getElementById('result-area'), resultText: document.getElementById('result-text'), historyList: document.getElementById('history-list'), metaDesc: document.getElementById('meta-desc'), navFbText: document.getElementById('nav-fb-text'), historyClearBtn: document.getElementById('history-clear-btn'), supportText: document.getElementById('support-text'), fbTitle: document.getElementById('fb-title'), fbEmailLabel: document.getElementById('fb-email-label'), fbMsgLabel: document.getElementById('fb-msg-label'), fbMsgInput: document.getElementById('fb-msg-input'), fbSubmitBtn: document.getElementById('fb-submit-btn'), cookieText: document.getElementById('cookie-text'), cookieRejectBtn: document.getElementById('cookie-reject-btn'), cookieAcceptBtn: document.getElementById('cookie-accept-btn'), footerRights: document.getElementById('footer-rights'), footerAbout: document.getElementById('footer-about'), footerPrivacy: document.getElementById('footer-privacy'), footerTerms: document.getElementById('footer-terms')
        };

        const trans = {
            tr: {
                alert: 'LÃ¼tfen bir fikir girin!', btn: 'Analiz Et', title: 'Fikrini <span class="text-blue-500">GerÃ§eÄŸe</span> DÃ¶nÃ¼ÅŸtÃ¼r', desc: 'Groq Llama 3.3 ile profesyonel analiz.', ph: 'Fikrinizi buraya yazÄ±n...', pdfBtn: 'PDF Ä°ndir', metaDesc: 'GiriÅŸimcilik fikirlerinizi yapay zeka ile analiz edin.', navFb: 'Ã–neri', histTitle: 'GEÃ‡MÄ°Å', histClear: 'Temizle', repTitle: 'Analiz Raporu', support: 'Destek Ol', fbTitle: 'Ã–neri & Ä°letiÅŸim', fbEmail: 'E-Posta (Opsiyonel)', fbMsg: 'MesajÄ±nÄ±z', fbPh: 'Fikriniz nedir?', fbSubmit: 'GÃ¶nder ğŸš€', cookieTxt: 'Size daha iyi hizmet sunmak iÃ§in Ã§erezleri kullanÄ±yoruz.', cookieRej: 'Reddet', cookieAcc: 'Kabul Et', fRights: 'TÃ¼m haklarÄ± saklÄ±dÄ±r.', fAbout: 'HakkÄ±mÄ±zda', fPrivacy: 'Gizlilik PolitikasÄ±', fTerms: 'KullanÄ±m KoÅŸullarÄ±'
            },
            en: {
                alert: 'Please enter an idea!', btn: 'Analyze', title: 'Turn Idea into <span class="text-blue-500">Reality</span>', desc: 'Professional analysis with Groq Llama 3.3.', ph: 'Type your idea here...', pdfBtn: 'Download PDF', metaDesc: 'Analyze your startup ideas instantly with AI.', navFb: 'Feedback', histTitle: 'HISTORY', histClear: 'Clear', repTitle: 'Analysis Report', support: 'Support Us', fbTitle: 'Feedback & Contact', fbEmail: 'Email (Optional)', fbMsg: 'Your Message', fbPh: 'What\'s on your mind?', fbSubmit: 'Send ğŸš€', cookieTxt: 'We use cookies to provide a better experience.', cookieRej: 'Reject', cookieAcc: 'Accept', fRights: 'All rights reserved.', fAbout: 'About Us', fPrivacy: 'Privacy Policy', fTerms: 'Terms of Use'
            }
        };

        function updateLanguage(lang) {
            document.documentElement.lang = lang;
            const t = trans[lang];
            // TÃ¼m alanlarÄ± gÃ¼ncelle
            if (els.heroTitle) els.heroTitle.innerHTML = t.title;
            if (els.heroDesc) els.heroDesc.innerText = t.desc;
            if (els.btnText) els.btnText.innerText = t.btn;
            if (els.input) els.input.placeholder = t.ph;
            if (els.metaDesc) els.metaDesc.content = t.metaDesc;
            if (els.navFbText) els.navFbText.innerText = t.navFb;
            if (els.historyTitle) els.historyTitle.innerText = t.histTitle;
            if (els.historyClearBtn) els.historyClearBtn.innerText = t.histClear;
            if (els.reportTitle) els.reportTitle.innerText = t.repTitle;
            if (els.supportText) els.supportText.innerText = t.support;
            if (els.pdfBtnText) els.pdfBtnText.innerText = t.pdfBtn;
            if (els.fbTitle) els.fbTitle.innerText = t.fbTitle;
            if (els.fbEmailLabel) els.fbEmailLabel.innerText = t.fbEmail;
            if (els.fbMsgLabel) els.fbMsgLabel.innerText = t.fbMsg;
            if (els.fbMsgInput) els.fbMsgInput.placeholder = t.fbPh;
            if (els.fbSubmitBtn) els.fbSubmitBtn.innerText = t.fbSubmit;
            if (els.cookieText) els.cookieText.innerText = t.cookieTxt;
            if (els.cookieRejectBtn) els.cookieRejectBtn.innerText = t.cookieRej;
            if (els.cookieAcceptBtn) els.cookieAcceptBtn.innerText = t.cookieAcc;
            if (els.footerRights) els.footerRights.innerText = t.fRights;
            if (els.footerAbout) els.footerAbout.innerText = t.fAbout;
            if (els.footerPrivacy) els.footerPrivacy.innerText = t.fPrivacy;
            if (els.footerTerms) els.footerTerms.innerText = t.fTerms;
        }

        if (els.langSelect) {
            els.langSelect.addEventListener('change', () => {
                updateLanguage(els.langSelect.value);
            });
        }

        // --- SAYFA YÃœKLENÄ°NCE (VARSAYILAN: Ä°NGÄ°LÄ°ZCE) ---
        document.addEventListener('DOMContentLoaded', () => {
            updateLanguage('en');
            loadHistorySafe();
            checkCookies();

            if (els.btn) {
                els.btn.addEventListener('click', async () => {
                    const text = els.input.value.trim();
                    const lang = els.langSelect.value;
                    if (!text) return alert(trans[lang].alert);

                    // Track analytics
                    gtag('event', 'analyze_clicked', { idea_length: text.length });

                    // Show loading screen
                    document.getElementById('loading-screen').classList.remove('hidden');
                    simulateProgress();

                    els.btn.disabled = true; els.btnText.classList.add('hidden'); els.spinner.classList.remove('hidden'); els.resultArea.classList.add('hidden');
                    try {
                        const res = await fetch('/api/analyze', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ idea: text, language: lang }) });
                        const data = await res.json();
                        if (data.error) throw new Error(data.error);
                        if (typeof marked !== 'undefined') els.resultText.innerHTML = marked.parse(data.result); else els.resultText.innerText = data.result;

                        // Hide loading screen
                        document.getElementById('loading-screen').classList.add('hidden');

                        els.resultArea.classList.remove('hidden', 'opacity-0'); els.resultArea.style.display = 'block';
                        setTimeout(() => els.resultArea.scrollIntoView({ behavior: 'smooth' }), 100);
                        saveToHistory(text);
                        incrementAnalysisCounter();
                        gtag('event', 'result_viewed');

                        // Show email capture section (Phase 2)
                        setTimeout(() => showEmailCapture(), 500);
                    } catch (e) {
                        document.getElementById('loading-screen').classList.add('hidden');
                        alert("Error: " + e.message);
                    }
                    finally { els.btn.disabled = false; els.btnText.classList.remove('hidden'); els.spinner.classList.add('hidden'); }
                });
            }

            document.getElementById('theme-toggle').addEventListener('click', () => document.documentElement.classList.toggle('dark'));

            document.getElementById('download-pdf-btn').addEventListener('click', () => {
                gtag('event', 'pdf_downloaded');
                const btn = document.getElementById('download-pdf-btn'); const oldText = btn.innerHTML; btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ...'; btn.disabled = true; const contentHTML = document.getElementById('result-text').innerHTML; const pdfContainer = document.getElementById('pdf-generator-container');
                pdfContainer.innerHTML = `<div style="border-bottom: 2px solid #000; padding-bottom: 20px; margin-bottom: 30px; display: flex; align-items: center;"><img src="https://cdn-icons-png.flaticon.com/512/8637/8637103.png" style="width: 50px; height: 50px; margin-right: 15px;"><div><h1 style="font-size: 24px; color: #2563eb; margin: 0;">AI Idea Refiner - Report</h1><p style="font-size: 12px; color: #666; margin: 5px 0 0 0;">Date: ${new Date().toLocaleDateString()}</p></div></div><div class="pdf-content">${contentHTML}</div><style>.pdf-content h1 { color: #1e40af; font-size: 20px; margin-top: 25px; border-bottom: 1px solid #ccc; } .pdf-content h2 { color: #2563eb; font-size: 18px; margin-top: 20px; } .pdf-content p { color: #000; font-size: 12px; line-height: 1.5; margin-bottom: 10px; } .pdf-content ul { color: #000; padding-left: 20px; } .pdf-content li { margin-bottom: 5px; } .pdf-content strong { color: #000; font-weight: bold; }</style>`;
                const opt = { margin: 0.5, filename: 'Idea_Analysis.pdf', image: { type: 'jpeg', quality: 0.98 }, html2canvas: { scale: 2, useCORS: true }, jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }, pagebreak: { mode: ['avoid-all', 'css', 'legacy'] } };
                html2pdf().set(opt).from(pdfContainer).save().then(() => { btn.innerHTML = oldText; btn.disabled = false; pdfContainer.innerHTML = "" });
            });
        });

        // === PHASE 1 NEW FUNCTIONS ===

        // Example Report Data
        const exampleReport = `# ğŸ“Š Veri OdaklÄ± Pazar Analizi: 8/10

**Pazar BÃ¼yÃ¼klÃ¼ÄŸÃ¼ (2025):** $12.5 Milyar  
**YÄ±llÄ±k BÃ¼yÃ¼me OranÄ±:** %23.4 CAGR  
**Trend Skoru:** â­â­â­â­â­ (5/5)

Beslenme ve saÄŸlÄ±k teknolojileri pazarÄ± hÄ±zla bÃ¼yÃ¼yor. Ã–zellikle AI destekli kiÅŸiselleÅŸtirme Ã§Ã¶zÃ¼mleri 2024-2025 dÃ¶neminde yÃ¼ksek talep gÃ¶rÃ¼yor.

# ğŸ¯ Hedef Kitle

**Birincil Persona:**
- 25-45 yaÅŸ arasÄ± kentli profesyoneller
- SaÄŸlÄ±klÄ± yaÅŸam trendini takip edenler
- Ortalama gelir seviyesi yÃ¼ksek

**Ä°kincil Persona:**
- Fitness salonlarÄ±na dÃ¼zenli giden kullanÄ±cÄ±lar
- Diyet yapan bireyler

# âš”ï¸ Rekabet Analizi

**Ana Rakipler:**
- MyFitnessPal (200M+ kullanÄ±cÄ±)
- Noom (50M+ kullanÄ±cÄ±)
- Yazio (10M+ kullanÄ±cÄ±)

**FÄ±rsat:** Mevcut uygulamalar yeterince kiÅŸiselleÅŸtirilmiÅŸ deÄŸil. AI temelli Ã¶neri sistemi ile fark yaratabilirsiniz.

# ğŸ’° GerÃ§ekÃ§i Gelir Modeli

**Freemium Model:**
- Ãœcretsiz: Temel Ã¶zellikler
- Premium ($9.99/ay): AI destekli Ã¶zel diyet planÄ±

**Ä°lk YÄ±l Tahmini:**
- 5,000 aktif kullanÄ±cÄ±
- %10 premium dÃ¶nÃ¼ÅŸÃ¼m
- AylÄ±k gelir: ~$5,000

# ğŸ“‰ Teknik Zorluk ve BÃ¼tÃ§e

**Zorluk Seviyesi:** Orta (6/10)  
**GeliÅŸtirme SÃ¼resi:** 4-6 ay  
**BaÅŸlangÄ±Ã§ BÃ¼tÃ§esi:** $25,000 - $40,000

**AylÄ±k Giderler:**
- Sunucu: $100-200
- AI API: $300-500
- Pazarlama: $500-1,000

# ğŸš€ Yol HaritasÄ±

**Ay 1-2:** MVP geliÅŸtirme  
**Ay 3-4:** Beta test  
**Ay 5-6:** Piyasaya sÃ¼rÃ¼m  

# ğŸ’¡ Son Karar

âœ… **Ã–nerilen:** Bu fikir baÅŸarÄ± potansiyeli taÅŸÄ±yor. KÃ¼Ã§Ã¼k baÅŸlayÄ±p bÃ¼yÃ¼yebilirsiniz.

**Kritik BaÅŸarÄ± FaktÃ¶rleri:**
- AI algoritmasÄ± kalitesi
- KullanÄ±cÄ± deneyimi
- Erken pazarlama stratejisi
`;

        function showExampleReport() {
            gtag('event', 'example_report_viewed');
            if (typeof marked !== 'undefined') {
                els.resultText.innerHTML = marked.parse(exampleReport);
            } else {
                els.resultText.innerText = exampleReport;
            }

            // Show notification banner
            const banner = document.createElement('div');
            banner.className = 'bg-yellow-50 dark:bg-yellow-900/20 border-2 border-yellow-400 rounded-xl p-4 mb-4';
            banner.innerHTML = '<p class="text-sm font-bold text-yellow-800 dark:text-yellow-200">ğŸ“Œ Bu bir Ã¶rnek rapor. Kendi fikrinizi analiz etmek iÃ§in aÅŸaÄŸÄ±daki kutuya yazÄ±n.</p>';
            els.resultArea.querySelector('.bg-gray-900').prepend(banner);

            els.resultArea.classList.remove('hidden', 'opacity-0');
            els.resultArea.style.display = 'block';
            setTimeout(() => els.resultArea.scrollIntoView({ behavior: 'smooth' }), 100);
        }

        function scrollToInput() {
            gtag('event', 'scroll_to_input_clicked');
            document.getElementById('idea-input').scrollIntoView({ behavior: 'smooth', block: 'center' });
            document.getElementById('idea-input').focus();
        }

        function shareToTwitter() {
            const text = `GiriÅŸimcilik fikrimi AI ile analiz ettim! ğŸš€\n\nâœ… Pazar Analizi\nâœ… Rakip KarÅŸÄ±laÅŸtÄ±rmasÄ±\nâœ… Gelir Modeli\n\nSen de dene:`;
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`;
            window.open(url, '_blank', 'width=550,height=420');
            gtag('event', 'share', { method: 'Twitter' });
        }

        function shareToLinkedIn() {
            const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`;
            window.open(url, '_blank', 'width=550,height=420');
            gtag('event', 'share', { method: 'LinkedIn' });
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                const btn = event.target.closest('button');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check"></i> KopyalandÄ±!';
                setTimeout(() => { btn.innerHTML = originalText; }, 2000);
                gtag('event', 'share', { method: 'Copy Link' });
            });
        }

        // Loading screen progress simulation
        const loadingSteps = [
            { progress: 20, emoji: 'ğŸ”', title: 'Pazar Analizi', message: '2024-2025 pazar verileri taranÄ±yor...' },
            { progress: 40, emoji: 'âš”ï¸', title: 'Rakip Analizi', message: 'Benzer Ã¼rÃ¼nler karÅŸÄ±laÅŸtÄ±rÄ±lÄ±yor...' },
            { progress: 60, emoji: 'ğŸ’°', title: 'Maliyet Hesaplama', message: 'GeliÅŸtirme ve iÅŸletme giderleri tahmin ediliyor...' },
            { progress: 80, emoji: 'ğŸ“Š', title: 'Rapor HazÄ±rlama', message: 'SonuÃ§lar derleniyor...' },
            { progress: 100, emoji: 'âœ…', title: 'TamamlandÄ±!', message: 'Raporunuz hazÄ±r' }
        ];

        async function simulateProgress() {
            for (let step of loadingSteps) {
                await new Promise(resolve => setTimeout(resolve, 3000));
                document.getElementById('progress-bar').style.width = step.progress + '%';
                document.getElementById('loading-emoji').textContent = step.emoji;
                document.getElementById('loading-title').textContent = step.title;
                document.getElementById('loading-message').textContent = step.message;
            }
        }

        function incrementAnalysisCounter() {
            let count = parseInt(localStorage.getItem('siteAnalysisCount') || '1247');
            count++;
            localStorage.setItem('siteAnalysisCount', count);
            const el = document.getElementById('total-analyses');
            if (el) el.textContent = count.toLocaleString();
        }

        // Track page view
        gtag('event', 'page_view', { page_title: 'Home' });

        // Track idea input started
        document.getElementById('idea-input').addEventListener('focus', function () {
            if (!this.dataset.tracked) {
                gtag('event', 'idea_input_started');
                this.dataset.tracked = 'true';
            }
        });

        // === PHASE 2: EMAIL CAPTURE ===

        // Show email capture section when result is displayed
        function showEmailCapture() {
            const emailSection = document.getElementById('email-capture-section');
            if (emailSection && !localStorage.getItem('email_submitted')) {
                emailSection.classList.remove('hidden');
            }
        }

        // Email capture form handler
        document.getElementById('email-capture-form').addEventListener('submit', async function (e) {
            e.preventDefault();

            const emailInput = document.getElementById('user-email');
            const submitBtn = document.getElementById('email-submit-btn');
            const email = emailInput.value.trim();

            if (!email) return;

            // Track analytics
            gtag('event', 'email_captured', { email_domain: email.split('@')[1] });

            // Disable form
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> GÃ¶nderiliyor...';

            try {
                // Save email to localStorage (in real app, send to backend)
                const emails = JSON.parse(localStorage.getItem('captured_emails') || '[]');
                emails.push({
                    email: email,
                    idea: document.getElementById('idea-input').value.substring(0, 100),
                    date: new Date().toISOString()
                });
                localStorage.setItem('captured_emails', JSON.stringify(emails));
                localStorage.setItem('email_submitted', 'true');

                // Show success message
                document.getElementById('email-capture-section').innerHTML = `
                    <div class="text-center py-8">
                        <div class="text-5xl mb-3">âœ…</div>
                        <h3 class="font-bold text-xl text-gray-800 dark:text-green-300 mb-2">TeÅŸekkÃ¼rler!</h3>
                        <p class="text-gray-600 dark:text-gray-300">Raporunuz <strong>${email}</strong> adresine gÃ¶nderildi.</p>
                    </div>
                `;

                // In production, you would send this to your backend:
                // await fetch('/api/save-email', {
                //     method: 'POST',
                //     headers: {'Content-Type': 'application/json'},
                //     body: JSON.stringify({ email, idea: document.getElementById('idea-input').value })
                // });

            } catch (error) {
                console.error('Email capture error:', error);
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'GÃ–NDER ğŸš€';
                alert('Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');
            }
        });



        function toggleFeedback() { const m = document.getElementById('feedback-modal'), c = document.getElementById('feedback-content'); if (m.classList.contains('hidden')) { m.classList.remove('hidden'); setTimeout(() => { c.classList.remove('scale-95', 'opacity-0'); c.classList.add('scale-100', 'opacity-100') }, 10) } else { c.classList.remove('scale-100', 'opacity-100'); c.classList.add('scale-95', 'opacity-0'); setTimeout(() => { m.classList.add('hidden') }, 300) } }
        function checkCookies() { const b = document.getElementById('cookie-banner'); if (!localStorage.getItem('cookiePreference')) { b.classList.remove('hidden'); setTimeout(() => b.classList.remove('translate-y-full'), 100) } }
        function acceptCookies() { localStorage.setItem('cookiePreference', 'accepted'); closeBanner() }
        function rejectCookies() { localStorage.setItem('cookiePreference', 'rejected'); closeBanner() }
        function closeBanner() { const b = document.getElementById('cookie-banner'); b.classList.add('translate-y-full'); setTimeout(() => b.classList.add('hidden'), 500) }
        function loadHistorySafe() { try { const raw = localStorage.getItem('aiHistory'); if (raw) renderHistory(JSON.parse(raw)) } catch { localStorage.removeItem('aiHistory') } }
        function saveToHistory(idea) { try { let h = JSON.parse(localStorage.getItem('aiHistory') || '[]'); h = h.filter(x => x.fullText !== idea); h.unshift({ title: idea.slice(0, 30) + '...', fullText: idea, date: new Date().toLocaleDateString() }); if (h.length > 5) h.pop(); localStorage.setItem('aiHistory', JSON.stringify(h)); renderHistory(h) } catch (e) { } }
        function renderHistory(h) { const l = document.getElementById('history-list'); if (!l) return; l.innerHTML = ''; h.forEach((x, i) => { const d = document.createElement('div'); d.className = "p-2 bg-gray-50 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 mb-2 flex justify-between cursor-pointer text-xs"; d.innerHTML = `<span class="truncate w-3/4 dark:text-gray-300">${x.title}</span><button onclick="del(${i},event)" class="text-red-400"><i class="fas fa-trash"></i></button>`; d.onclick = (e) => { if (!e.target.closest('button')) document.getElementById('idea-input').value = x.fullText || x.title }; l.appendChild(d) }) }
        window.del = (i, e) => { e.stopPropagation(); let h = JSON.parse(localStorage.getItem('aiHistory')); h.splice(i, 1); localStorage.setItem('aiHistory', JSON.stringify(h)); renderHistory(h) }; window.clearAllHistory = () => { localStorage.removeItem('aiHistory'); renderHistory([]) };
    </script>
</body>

</html>